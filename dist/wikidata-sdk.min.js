!function t(e,r,i){function n(o,s){if(!r[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};e[o][0].call(c.exports,function(t){var r=e[o][1][t];return n(r?r:t)},c,c.exports,t,e,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(t,e,r){"use strict";var i=t("./wikidata_time_to_date_object"),n={};n.isNumericId=function(t){return/^[0-9]+$/.test(t)},n.isWikidataId=function(t){return/^(Q|P)[0-9]+$/.test(t)},n.isWikidataEntityId=function(t){return/^Q[0-9]+$/.test(t)},n.isWikidataPropertyId=function(t){return/^P[0-9]+$/.test(t)},n.normalizeId=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Q";if(n.isNumericId(t))return e?t:""+r+t;if(n.isWikidataId(t))return e?t.slice(1):t;throw new Error("invalid id")},n.getNumericId=function(t){if(!n.isWikidataId(t))throw new Error("invalid wikidata id: "+t);return t.replace(/Q|P/,"")},n.normalizeIds=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Q";return t.map(function(t){return n.normalizeId(t,e,r)})},n.wikidataTimeToDateObject=i,n.wikidataTimeToEpochTime=function(t){return i(t).getTime()},n.wikidataTimeToISOString=function(t){return i(t).toISOString()},n.normalizeWikidataTime=n.wikidataTimeToEpochTime,e.exports=n},{"./wikidata_time_to_date_object":4}],2:[function(t,e,r){"use strict";var i=t("./simplify_claims");e.exports={wd:{entities:function t(e){e=e.body||e;var r=e,t=r.entities;for(var n in t){var a=t[n];a.claims=i(a.claims)}return t}}}},{"./simplify_claims":3}],3:[function(t,e,r){"use strict";var i=t("./helpers"),n=function(t,e,r){var i={};for(var n in t){var o=t[n];r&&(n=r+":"+n),i[n]=a(o,e,r)}return i},a=function(t,e,r){return t.map(function(t){return s(t,e,r)}).filter(o)},o=function(t){return null!=t},s=function(t,e,r){var n=t.mainsnak;if(null==n)return null;var a=n.datatype,o=n.datavalue;if(null==o)return null;switch(a){case"string":case"commonsMedia":case"url":case"external-id":return o.value;case"monolingualtext":return o.value.text;case"wikibase-item":return u(o,e);case"wikibase-property":return u(o,r);case"time":return i.normalizeWikidataTime(o.value.time);case"quantity":return parseFloat(o.value.amount);case"globe-coordinate":return l(o.value);default:return null}},u=function(t,e){var r=t.value.id;return"string"==typeof e?e+":"+r:r},l=function(t){return[t.latitude,t.longitude]};e.exports={simplifyClaims:n,simplifyPropertyClaims:a,simplifyClaim:s}},{"./helpers":1}],4:[function(t,e,r){"use strict";var i=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();e.exports=function(t){var e=t[0],r=t.slice(1),i=n(e,r);return"Invalid Date"===i.toString()?parseInvalideDate(e,r):i};var n=function(t,e){return"-"===t?o(e):a(e)},a=function(t){return new Date(t)},o=function(t){var e="-00"+t;return new Date(e)};parseInvalideDate=function(t,e){var r=e.split("T")[0].split("-"),a=i(r,3),o=a[0];a[1],a[2];return n(t,o)}},{}],5:[function(t,e,r){"use strict";var i=e.exports={};i.searchEntities=t("./queries/search_entities"),i.getEntities=t("./queries/get_entities"),i.getManyEntities=t("./queries/get_many_entities"),i.getWikidataIdsFromSitelinks=t("./queries/get_wikidata_ids_from_sitelinks"),i.sparqlQuery=t("./queries/sparql_query"),i.getReverseClaims=t("./queries/get_reverse_claims"),i.parse=t("./helpers/parse_responses");var n=t("./helpers/simplify_claims"),a=n.simplifyClaim,o=n.simplifyPropertyClaims,s=n.simplifyClaims;i.simplifyClaim=a,i.simplifyPropertyClaims=o,i.simplifyClaims=s,i.simplifySparqlResults=t("./queries/simplify_sparql_results"),i.getWikidataIdsFromWikipediaTitles=i.getWikidataIdsFromSitelinks;var u=t("./helpers/helpers");i.helpers=u;for(var l in u)i[l]=u[l]},{"./helpers/helpers":1,"./helpers/parse_responses":2,"./helpers/simplify_claims":3,"./queries/get_entities":6,"./queries/get_many_entities":7,"./queries/get_reverse_claims":8,"./queries/get_wikidata_ids_from_sitelinks":9,"./queries/search_entities":10,"./queries/simplify_sparql_results":11,"./queries/sparql_query":12}],6:[function(t,e,r){"use strict";var i=t("../helpers/helpers"),n=t("../utils/build_url"),a=t("../utils/utils"),o=a.isPlainObject,s=a.forceArray,u=a.shortLang;e.exports=function(t,e,r,a){if(o(t)){var l=t;t=l.ids,e=l.languages,r=l.props,a=l.format}if(a=a||"json",!(t&&t.length>0))throw new Error("no id provided");t.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation"),t=i.normalizeIds(s(t)),r=s(r);var c={action:"wbgetentities",ids:t.join("|"),format:a};return e&&(e=s(e).map(u),c.languages=e.join("|")),r&&r.length>0&&(c.props=r.join("|")),n("wikidata",c)}},{"../helpers/helpers":1,"../utils/build_url":13,"../utils/utils":15}],7:[function(t,e,r){"use strict";function i(t,e){return Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var n=i(["getManyEntities expects an array of ids"],["getManyEntities expects an array of ids"]),a=t("./get_entities"),o=t("../utils/utils"),s=o.isPlainObject;e.exports=function(t,e,r,i){if(s(t)){var o=t;t=o.ids,e=o.languages,r=o.props,i=o.format}if(!(t instanceof Array))throw new(Error(n));return u(t).map(function(t){return a(t,e,r,i)})};var u=function(t){for(var e=[];t.length>0;){var r=t.slice(0,50);t=t.slice(50),e.push(r)}return e}},{"../utils/utils":15,"./get_entities":6}],8:[function(t,e,r){"use strict";var i=t("../helpers/helpers"),n=t("./sparql_query");e.exports=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;i.isWikidataEntityId(e)?e="wd:"+e:"string"==typeof e&&(e="`"+e+"`");var a="\n    SELECT ?subject WHERE {\n      ?subject wdt:"+t+" "+e+" .\n    }\n    LIMIT "+r+"\n    ";return n(a)}},{"../helpers/helpers":1,"./sparql_query":12}],9:[function(t,e,r){"use strict";var i=t("../utils/build_url"),n=t("../utils/utils"),a=n.isPlainObject,o=n.forceArray,s=n.shortLang;e.exports=function(t,e,r,n,l){if(a(t)){var c=t;t=c.titles,e=c.sites,r=c.languages,n=c.props,l=c.format}if(l=l||"json",!(t&&t.length>0))throw new Error("no title provided");e&&e.length>0||(e=["enwiki"]),t=o(t),e=o(e).map(u),n=o(n);var f={action:"wbgetentities",titles:t.join("|"),sites:e.join("|"),format:l};return r&&(r=o(r).map(s),f.languages=r.join("|")),n&&n.length>0&&(f.props=n.join("|")),i("wikidata",f)};var u=function(t){return 2===t.length?t+"wiki":t}},{"../utils/build_url":13,"../utils/utils":15}],10:[function(t,e,r){"use strict";var i=t("../utils/build_url"),n=t("../utils/utils"),a=n.isPlainObject;e.exports=function(t,e,r,n,o){if(a(t)){var s=t;t=s.search,e=s.language,r=s.limit,n=s.format,o=s.uselang}if(!(t&&t.length>0))throw new Error("search can't be empty");return e=e||"en",o=o||e,r=r||"20",n=n||"json",i("wikidata",{action:"wbsearchentities",search:t,language:e,limit:r,format:n,uselang:o})}},{"../utils/build_url":13,"../utils/utils":15}],11:[function(t,e,r){"use strict";var i=function(){function t(t,e){var r=[],i=!0,n=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);i=!0);}catch(t){n=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(n)throw a}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports=function(t){"string"==typeof t&&(t=JSON.parse(t));var e=t.head.vars,r=t.results.bindings;if(1!==e.length){var o=p(e),s=i(o,2),u=s[0],l=s[1];return r.map(d(u,l))}var c=function(){var t=e[0];return{v:r.map(function(e){return a(e[t])}).filter(function(t){return null!=t})}}();if("object"===("undefined"==typeof c?"undefined":n(c)))return c.v};var a=function(t){if(t){var e=t.datatype;e=e&&e.replace("http://www.w3.org/2001/XMLSchema#","");var r=o[t.type]||u(e);return r(t)}},o={uri:function(t){return f(t.value)},bnode:function(){return null}},s=function(t){return parseFloat(t.value)},u=function(t){return t=t&&t.replace("http://www.w3.org/2001/XMLSchema#",""),l(t)||c},l={decimal:s,integer:s,float:s,double:s,boolean:function(t){return"true"===t.value}},c=function(t){return t.value},f=function(t){return t.replace("http://www.wikidata.org/entity/","")},p=function(t){var e=[],r=[];for(var i in t)t.indexOf(i+"Label")>-1?e.push(i):/^\w+Label$/.test(i)||r.push(i);return[e,r]},d=function(t,e){return function(r){var i={};for(var n in t)i[n]={value:a(r[n]),label:r[n+"Label"].value};for(var o in e)i[o]=a(r[o]);return i}}},{}],12:[function(t,e,r){"use strict";e.exports=function(t){var e=encodeURIComponent(t);return"https://query.wikidata.org/sparql?format=json&query="+e}},{}],13:[function(t,e,r){"use strict";var i;try{i=t("querystring")}catch(e){i=t("./querystring_lite")}var n={wikidata:"https://www.wikidata.org/w/api.php",commons:"http://commons.wikimedia.org"};e.exports=function(t,e){return n[t]+"?"+i.stringify(e)}},{"./querystring_lite":14,querystring:18}],14:[function(t,e,r){"use strict";e.exports={stringify:function(t){var e="";for(var r in t){var i=t[r];i&&(e+="&"+r+"="+i)}return e=e.slice(1),encodeURI?encodeURI(e):e}}},{}],15:[function(t,e,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.exports={shortLang:function(t){return t.slice(0,2)},forceArray:function(t){return"string"==typeof t&&(t=[t]),t||[]},isPlainObject:function(t){return!(!t||"object"!==("undefined"==typeof t?"undefined":i(t))||t instanceof Array)}}},{}],16:[function(t,e,r){"use strict";function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,r,a){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var u=1e3;a&&"number"==typeof a.maxKeys&&(u=a.maxKeys);var l=t.length;u>0&&l>u&&(l=u);for(var c=0;c<l;++c){var f,p,d,m,y=t[c].replace(s,"%20"),v=y.indexOf(r);v>=0?(f=y.substr(0,v),p=y.substr(v+1)):(f=y,p=""),d=decodeURIComponent(f),m=decodeURIComponent(p),i(o,d)?n(o[d])?o[d].push(m):o[d]=[o[d],m]:o[d]=m}return o};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],17:[function(t,e,r){"use strict";function i(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var n=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,r,s){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?i(o(t),function(o){var s=encodeURIComponent(n(o))+r;return a(t[o])?i(t[o],function(t){return s+encodeURIComponent(n(t))}).join(e):s+encodeURIComponent(n(t[o]))}).join(e):s?encodeURIComponent(n(s))+r+encodeURIComponent(n(t)):""};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},{}],18:[function(t,e,r){"use strict";r.decode=r.parse=t("./decode"),r.encode=r.stringify=t("./encode")},{"./decode":16,"./encode":17}]},{},[5]);
