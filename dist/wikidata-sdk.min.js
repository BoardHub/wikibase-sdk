!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.wdk=e()}}(function(){return function e(t,r,i){function n(o,u){if(!r[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var c=r[o]={exports:{}};t[o][0].call(c.exports,function(e){var r=t[o][1][e];return n(r?r:e)},c,c.exports,e,t,r,i)}return r[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)n(i[o]);return n}({1:[function(e,t,r){"use strict";var i=e("./wikidata_time_to_date_object"),n={};n.isNumericId=function(e){return/^[0-9]+$/.test(e)},n.isEntityId=function(e){return/^(Q|P)[0-9]+$/.test(e)},n.isItemId=function(e){return/^Q[0-9]+$/.test(e)},n.isPropertyId=function(e){return/^P[0-9]+$/.test(e)},n.getNumericId=function(e){if(!n.isEntityId(e))throw new Error("invalid wikidata id: "+e);return e.replace(/Q|P/,"")},n.wikidataTimeToDateObject=i;var s=function(e){return function(t){try{return e(t)}catch(e){return t}}},o=function(e){return i(e).getTime()},u=function(e){return i(e).toISOString()};n.wikidataTimeToEpochTime=s(o),n.wikidataTimeToISOString=s(u),t.exports=n},{"./wikidata_time_to_date_object":6}],2:[function(e,t,r){"use strict";var i=e("./simplify_entity");t.exports={wd:{entities:function e(t){t=t.body||t;var r=t,e=r.entities;return Object.keys(e).forEach(function(t){e[t]=i(e[t])}),e}}}},{"./simplify_entity":4}],3:[function(e,t,r){"use strict";var i=e("./helpers"),n=function(e,t,r,i){var n={};for(var o in e){var u=e[o];r&&(o=r+":"+o),n[o]=s(u,t,r,i)}return n},s=function(e,t,r,i){return e.map(function(e){return u(e,t,r,i)}).filter(o)},o=function(e){return null!=e},u=function(e,t,r,s){var o=e.mainsnak,u=e.qualifiers;if(null==o)return null;var f=o.datatype,p=o.datavalue;if(null==p)return null;var y=null;switch(f){case"string":case"commonsMedia":case"url":case"external-id":y=p.value;break;case"monolingualtext":y=p.value.text;break;case"wikibase-item":y=a(p,t);break;case"wikibase-property":y=a(p,r);break;case"time":y=i.wikidataTimeToISOString(p.value.time);break;case"quantity":y=parseFloat(p.value.amount);break;case"globe-coordinate":y=l(p.value)}if(s){var d={};for(var m in u)d[m]=u[m].map(c);return{value:y,qualifiers:n(d,t,r)}}return y},a=function(e,t){var r=e.value.id;return"string"==typeof t?t+":"+r:r},l=function(e){return[e.latitude,e.longitude]},c=function(e){return{mainsnak:e}};t.exports={simplifyClaims:n,simplifyPropertyClaims:s,simplifyClaim:u}},{"./helpers":1}],4:[function(e,t,r){"use strict";var i=e("./simplify_claims"),n=i.simplifyClaims,s=e("./simplify_text_attributes");t.exports=function(e){return{id:e.id,type:e.type,modified:e.modified,labels:s.labels(e.labels),descriptions:s.descriptions(e.descriptions),aliases:s.aliases(e.aliases),claims:n(e.claims),sitelinks:s.sitelinks(e.sitelinks)}}},{"./simplify_claims":3,"./simplify_text_attributes":5}],5:[function(e,t,r){"use strict";var i=function(e,t){return function(r){var i={};return Object.keys(r).forEach(function(s){var o=r[s];i[s]=e?o.map(n):o[t]}),i}},n=function(e){return e.value},s=i(!1,"value");t.exports={labels:s,descriptions:s,aliases:i(!0,"value"),sitelinks:i(!1,"title")}},{}],6:[function(e,t,r){"use strict";t.exports=function(e){var t=e[0],r=e.slice(1),n=i(t,r);return"Invalid Date"===n.toString()?o(t,r):n};var i=function(e,t){return"-"===e?s(t):n(t)},n=function(e){return new Date(e)},s=function(e){var t="-00"+e;return new Date(t)},o=function(e,t){var r=t.split("T")[0].split("-")[0];return i(e,r)}},{}],7:[function(e,t,r){"use strict";var i=t.exports={};i.searchEntities=e("./queries/search_entities"),i.getEntities=e("./queries/get_entities"),i.getManyEntities=e("./queries/get_many_entities"),i.getWikidataIdsFromSitelinks=e("./queries/get_wikidata_ids_from_sitelinks"),i.sparqlQuery=e("./queries/sparql_query"),i.getReverseClaims=e("./queries/get_reverse_claims"),i.parse=e("./helpers/parse_responses");var n=e("./helpers/simplify_claims"),s=e("./queries/simplify_sparql_results");i.simplify=e("../lib/helpers/simplify_text_attributes"),i.simplify.entity=e("../lib/helpers/simplify_entity"),i.simplify.claim=n.simplifyClaim,i.simplify.propertyClaims=n.simplifyPropertyClaims,i.simplify.claims=n.simplifyClaims,i.simplify.sparqlResults=s,i.simplifySparqlResults=e("./queries/simplify_sparql_results"),Object.assign(i,n),i.getWikidataIdsFromWikipediaTitles=i.getWikidataIdsFromSitelinks,Object.assign(i,e("./helpers/helpers"))},{"../lib/helpers/simplify_entity":4,"../lib/helpers/simplify_text_attributes":5,"./helpers/helpers":1,"./helpers/parse_responses":2,"./helpers/simplify_claims":3,"./queries/get_entities":8,"./queries/get_many_entities":9,"./queries/get_reverse_claims":10,"./queries/get_wikidata_ids_from_sitelinks":11,"./queries/search_entities":12,"./queries/simplify_sparql_results":13,"./queries/sparql_query":14}],8:[function(e,t,r){"use strict";var i=e("../utils/build_url"),n=e("../utils/utils"),s=n.isPlainObject,o=n.forceArray,u=n.shortLang;t.exports=function(e,t,r,n){if(s(e)){var a=e;e=a.ids,t=a.languages,r=a.props,n=a.format}if(n=n||"json",!(e&&e.length>0))throw new Error("no id provided");e.length>50&&console.warn("getEntities accepts 50 ids max to match Wikidata API limitations:\n      this request won't get all the desired entities.\n      You can use getManyEntities instead to generate several request urls\n      to work around this limitation"),e=o(e),r=o(r);var l={action:"wbgetentities",ids:e.join("|"),format:n};return t&&(t=o(t).map(u),l.languages=t.join("|")),r&&r.length>0&&(l.props=r.join("|")),i(l)}},{"../utils/build_url":15,"../utils/utils":17}],9:[function(e,t,r){"use strict";function i(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var n=i(["getManyEntities expects an array of ids"],["getManyEntities expects an array of ids"]),s=e("./get_entities"),o=e("../utils/utils"),u=o.isPlainObject;t.exports=function(e,t,r,i){if(u(e)){var o=e;e=o.ids,t=o.languages,r=o.props,i=o.format}if(!(e instanceof Array))throw new(Error(n));return a(e).map(function(e){return s(e,t,r,i)})};var a=function(e){for(var t=[];e.length>0;){var r=e.slice(0,50);e=e.slice(50),t.push(r)}return t}},{"../utils/utils":17,"./get_entities":8}],10:[function(e,t,r){"use strict";function i(e){return o.isItemId(e)?e="wd:"+e:"string"==typeof e&&(e="'"+e+"'"),e}function n(e,t,r){return"SELECT ?subject WHERE {\n      ?subject wdt:"+e+" "+t+" .\n    }\n    LIMIT "+r}function s(e,t,r){return"SELECT ?subject WHERE {\n    ?subject wdt:"+e+" ?value .\n    FILTER (lcase(?value) = "+t.toLowerCase()+")\n  }\n  LIMIT "+r}var o=e("../helpers/helpers"),u=e("./sparql_query");t.exports=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.limit,a=r.caseInsensitive;o=o||1e3;var l=a?s:n,c=i(t),f=l(e,c,o);return u(f)}},{"../helpers/helpers":1,"./sparql_query":14}],11:[function(e,t,r){"use strict";var i=e("../utils/build_url"),n=e("../utils/utils"),s=n.isPlainObject,o=n.forceArray,u=n.shortLang;t.exports=function(e,t,r,n,l){if(s(e)){var c=e;e=c.titles,t=c.sites,r=c.languages,n=c.props,l=c.format}if(l=l||"json",!(e&&e.length>0))throw new Error("no title provided");t&&t.length>0||(t=["enwiki"]),e=o(e),t=o(t).map(a),n=o(n);var f={action:"wbgetentities",titles:e.join("|"),sites:t.join("|"),format:l};return r&&(r=o(r).map(u),f.languages=r.join("|")),n&&n.length>0&&(f.props=n.join("|")),i(f)};var a=function(e){return 2===e.length?e+"wiki":e}},{"../utils/build_url":15,"../utils/utils":17}],12:[function(e,t,r){"use strict";var i=e("../utils/build_url"),n=e("../utils/utils"),s=n.isPlainObject;t.exports=function(e,t,r,n,o){if(s(e)){var u=e;e=u.search,t=u.language,r=u.limit,n=u.format,o=u.uselang}if(!(e&&e.length>0))throw new Error("search can't be empty");return t=t||"en",o=o||t,r=r||"20",n=n||"json",i({action:"wbsearchentities",search:e,language:t,limit:r,format:n,uselang:o})}},{"../utils/build_url":15,"../utils/utils":17}],13:[function(e,t,r){"use strict";var i=function(){function e(e,t){var r=[],i=!0,n=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done)&&(r.push(o.value),!t||r.length!==t);i=!0);}catch(e){n=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw s}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports=function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e.head.vars,r=e.results.bindings;if(1!==t.length){var o=p(t),u=i(o,2),a=u[0],l=u[1];return r.map(y(a,l))}var c=function(){var e=t[0];return{v:r.map(function(t){return s(t[e])}).filter(function(e){return null!=e})}}();if("object"===("undefined"==typeof c?"undefined":n(c)))return c.v};var s=function(e){if(e){var t=e.datatype;t=t&&t.replace("http://www.w3.org/2001/XMLSchema#","");var r=o[e.type]||a(t);return r(e)}},o={uri:function(e){return f(e.value)},bnode:function(){return null}},u=function(e){return parseFloat(e.value)},a=function(e){return e=e&&e.replace("http://www.w3.org/2001/XMLSchema#",""),l[e]||c},l={decimal:u,integer:u,float:u,double:u,boolean:function(e){return"true"===e.value}},c=function(e){return e.value},f=function(e){return e.replace("http://www.wikidata.org/entity/","")},p=function(e){var t=[],r=[],i=!0,n=!1,s=void 0;try{for(var o,u=e[Symbol.iterator]();!(i=(o=u.next()).done);i=!0){var a=o.value;e.indexOf(a+"Label")>-1?t.push(a):/^\w+Label$/.test(a)||r.push(a)}}catch(e){n=!0,s=e}finally{try{!i&&u.return&&u.return()}finally{if(n)throw s}}return[t,r]},y=function(e,t){return function(r){var i={},n=!0,o=!1,u=void 0;try{for(var a,l=e[Symbol.iterator]();!(n=(a=l.next()).done);n=!0){var c=a.value,f=s(r[c]);if(null!=f){var p=r[c+"Label"]&&r[c+"Label"].value;i[c]={value:f,label:p}}}}catch(e){o=!0,u=e}finally{try{!n&&l.return&&l.return()}finally{if(o)throw u}}var y=!0,d=!1,m=void 0;try{for(var v,b=t[Symbol.iterator]();!(y=(v=b.next()).done);y=!0){var g=v.value;i[g]=s(r[g])}}catch(e){d=!0,m=e}finally{try{!y&&b.return&&b.return()}finally{if(d)throw m}}return i}}},{}],14:[function(e,t,r){"use strict";var i=e("../utils/utils"),n=i.fixedEncodeURIComponent;t.exports=function(e){var t=n(e);return"https://query.wikidata.org/sparql?format=json&query="+t}},{"../utils/utils":17}],15:[function(e,t,r){"use strict";var i="https://www.wikidata.org/w/api.php",n="undefined"!=typeof location&&"undefined"!=typeof document,s=e(n?"./querystring_lite":"querystring");t.exports=function(e){return n&&(e.origin="*"),i+"?"+s.stringify(e)}},{"./querystring_lite":16,querystring:20}],16:[function(e,t,r){"use strict";t.exports={stringify:function(e){var t="";for(var r in e){var i=e[r];i&&(t+="&"+r+"="+i)}return t=t.slice(1),encodeURI?encodeURI(t):t}}},{}],17:[function(e,t,r){"use strict";var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.exports={shortLang:function(e){return e.slice(0,2)},forceArray:function(e){return"string"==typeof e&&(e=[e]),e||[]},isPlainObject:function(e){return!(!e||"object"!==("undefined"==typeof e?"undefined":i(e))||e instanceof Array)},fixedEncodeURIComponent:function(e){return encodeURIComponent(e).replace(/[!'()*]/g,n)}};var n=function(e){return"%"+e.charCodeAt(0).toString(16)}},{}],18:[function(e,t,r){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,r,s){t=t||"&",r=r||"=";var o={};if("string"!=typeof e||0===e.length)return o;var u=/\+/g;e=e.split(t);var a=1e3;s&&"number"==typeof s.maxKeys&&(a=s.maxKeys);var l=e.length;a>0&&l>a&&(l=a);for(var c=0;c<l;++c){var f,p,y,d,m=e[c].replace(u,"%20"),v=m.indexOf(r);v>=0?(f=m.substr(0,v),p=m.substr(v+1)):(f=m,p=""),y=decodeURIComponent(f),d=decodeURIComponent(p),i(o,y)?n(o[y])?o[y].push(d):o[y]=[o[y],d]:o[y]=d}return o};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],19:[function(e,t,r){"use strict";function i(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,r,u){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),function(o){var u=encodeURIComponent(n(o))+r;return s(e[o])?i(e[o],function(e){return u+encodeURIComponent(n(e))}).join(t):u+encodeURIComponent(n(e[o]))}).join(t):u?encodeURIComponent(n(u))+r+encodeURIComponent(n(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],20:[function(e,t,r){"use strict";r.decode=r.parse=e("./decode"),r.encode=r.stringify=e("./encode")},{"./decode":18,"./encode":19}]},{},[7])(7)});
