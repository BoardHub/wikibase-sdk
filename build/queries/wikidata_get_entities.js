// Generated by CoffeeScript 1.9.3
(function() {
  var buildUrl, wd_,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  wd_ = require('../utils/utils');

  buildUrl = require('../utils/build_url');

  module.exports = function(ids, languages, props, format) {
    var query, ref;
    if (languages == null) {
      languages = ['en'];
    }
    if (format == null) {
      format = 'json';
    }
    if (!((ids != null) || ids.length === 0)) {
      throw new Error('no id provided');
    }
    ref = [ids, languages, props].map(wd_.toPropertiesArray), ids = ref[0], languages = ref[1], props = ref[2];
    ids = wd_.normalizeIds(ids);
    if (indexOf.call(languages, 'en') < 0) {
      languages.push('en');
    }
    query = {
      action: 'wbgetentities',
      ids: ids.join('|'),
      languages: languages.join('|'),
      format: format
    };
    if ((props != null) && props.length > 0) {
      query.props = props.join('|');
    }
    return buildUrl('wikidata', query);
  };

}).call(this);
