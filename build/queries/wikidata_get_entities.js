// Generated by CoffeeScript 1.9.3
(function() {
  var buildUrl, forceArray, ref, shortLang, wd_,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  wd_ = require('../helpers/helpers');

  buildUrl = require('../utils/build_url');

  ref = require('../utils/utils'), forceArray = ref.forceArray, shortLang = ref.shortLang;

  module.exports = function(ids, languages, props, format) {
    var query;
    if (languages == null) {
      languages = ['en'];
    }
    if (format == null) {
      format = 'json';
    }
    if (!((ids != null) || ids.length === 0)) {
      throw new Error('no id provided');
    }
    ids = wd_.normalizeIds(forceArray(ids));
    languages = forceArray(languages).map(shortLang);
    props = forceArray(props);
    if (indexOf.call(languages, 'en') < 0) {
      languages.push('en');
    }
    query = {
      action: 'wbgetentities',
      ids: ids.join('|'),
      languages: languages.join('|'),
      format: format
    };
    if ((props != null ? props.length : void 0) > 0) {
      query.props = props.join('|');
    }
    return buildUrl('wikidata', query);
  };

}).call(this);
